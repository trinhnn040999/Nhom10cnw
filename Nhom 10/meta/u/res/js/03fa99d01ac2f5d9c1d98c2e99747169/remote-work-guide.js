$((function(){var a=$("html"),e=$(document),o=$("#modal"),n=$("body");e.on("scroll",(function(){e.scrollTop()>99?a.addClass("scroll"):a.removeClass("scroll")})),e.scroll();var r=$("header").first().height();$('section a[href^="http"]').attr("target","_blank"),$('a[href*="#"]').not('[href="#"]').not('[href="#0"]').click((function(a){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var e=$(this.hash);(e=e.length?e:$("[name="+this.hash.slice(1)+"]")).length&&(a.preventDefault(),$("html, body").animate({scrollTop:e.offset().top-r},1e3,(function(){var a=$(e);if(a.focus(),a.is(":focus"))return!1;a.attr("tabindex","-1"),a.focus()})))}})),e.on("click","a[data-board-href]",(function(a){a.preventDefault(),o.removeClass("confirm error"),$.getJSON($(this).attr("data-board-href")+".json").then((function(a){o.find('input[name="idBoardSource"]').val(a.id),o.find('input[name="name"]').val(a.name),o.find('input[name="keepFromSource"]').prop("checked",!0),n.addClass("modal")})).fail((function(a){console.warn("fail",a)}))})),o.on("submit","form",(function(){var a={idBoardSource:o.find('input[name="idBoardSource"]').val(),name:o.find('input[name="name"]').val(),keepFromSource:o.find('input[name="keepFromSource"]').prop("checked")?"cards":null};return api.post("/1/boards",a).fail((function(a){console.warn("fail",a),o.addClass("error")})).done((function(a){o.find(".message-confirm a").attr("href",a.url),o.addClass("confirm")})),!1})),$("#modal").on("click","div.close",(function(){n.removeClass("modal")})),e.keyup((function(a){27===a.keyCode&&n.hasClass("modal")&&n.removeClass("modal")}))}));